"use strict";(()=>{(function(){function p(s){var n=s.botId||"lola-demo",l=s.apiBase||"",i=s.userId||"",d=s.chatId||"",y=s.theme||"light",r=s.context||null,e=document.createElement("button");e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',e.style.position="fixed",e.style.bottom="20px",e.style.right="20px",e.style.border="none",e.style.background="#121212",e.style.color="#fff",e.style.borderRadius="50%",e.style.width="60px",e.style.height="60px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.cursor="pointer",e.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",e.style.transition="all 0.2s ease",e.style.zIndex=999999,e.style.position="fixed";var a=document.createElement("span");a.textContent="1",a.style.position="absolute",a.style.top="-4px",a.style.right="-4px",a.style.background="#ff3b30",a.style.color="#fff",a.style.fontSize="10px",a.style.fontWeight="600",a.style.width="18px",a.style.height="18px",a.style.borderRadius="50%",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.boxShadow="0 1px 3px rgba(0,0,0,0.3)",a.style.pointerEvents="none",e.appendChild(a),e.onmouseenter=function(){e.style.transform="scale(1.05)"},e.onmouseleave=function(){e.style.transform="scale(1)"};var t=document.createElement("iframe");t.style.position="fixed",t.style.bottom="100px",t.style.right="20px",t.style.width="380px",t.style.height="560px",t.style.border="0",t.style.borderRadius="16px",t.style.boxShadow="0 8px 24px rgba(0,0,0,0.15)",t.style.overflow="hidden",t.style.display="none",t.style.zIndex=999999,t.style.transition="all 0.3s ease",t.style.maxWidth="calc(100vw - 40px)",t.style.maxHeight="calc(100vh - 120px)",t.allow="clipboard-read; clipboard-write; microphone";var h=s.baseUrl||"",m="?apiBase="+encodeURIComponent(l)+(i?"&userId="+encodeURIComponent(i):"")+(d?"&chatId="+encodeURIComponent(d):"")+(y?"&theme="+encodeURIComponent(y):"")+(r?"&context="+encodeURIComponent(JSON.stringify(r)):"");t.src=(h||"")+"/chat/"+encodeURIComponent(n)+m;var c=!1;window.addEventListener("message",function(o){o.data&&o.data.type==="LOLA_RESIZE"&&(c=o.data.isMaximized,o.data.isMaximized?(t.style.width="100%",t.style.height="100%",t.style.maxWidth="1440px",t.style.top="0",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.right="auto",t.style.bottom="0",t.style.borderRadius="0",t.style.maxHeight="none"):o.data.isCollapsed?(t.style.width="380px",t.style.height="80px",t.style.bottom="100px",t.style.right="20px",t.style.borderRadius="16px",t.style.top="auto",t.style.left="auto",t.style.transform="none",t.style.maxWidth="calc(100vw - 40px)"):(t.style.width="380px",t.style.height="560px",t.style.bottom="100px",t.style.right="20px",t.style.borderRadius="16px",t.style.top="auto",t.style.left="auto",t.style.transform="none",t.style.maxWidth="calc(100vw - 40px)",t.style.maxHeight="calc(100vh - 120px)"))}),e.addEventListener("click",function(){if(a&&a.style.display!=="none"&&(a.style.display="none"),t.style.display==="none"){t.style.display="block",t.style.opacity="0";var o=c?"translateX(-50%) translateY(20px)":"translateY(20px)",u=c?"translateX(-50%) translateY(0)":"translateY(0)";t.style.transform=o,setTimeout(function(){t.style.opacity="1",t.style.transform=u},10)}else t.style.display="none"}),document.body.appendChild(e),document.body.appendChild(t)}function x(){var s=document.currentScript;if(!s){for(var n=document.getElementsByTagName("script"),l=0;l<n.length;l++)if(n[l].src&&n[l].src.includes("/embed/lolabot.js")){s=n[l];break}}if(s){var i=new URL(s.src),d=i.origin,y=s.getAttribute("data-bot-id")||"lola-demo",r=null;try{var e=s.getAttribute("data-context");e&&(r=JSON.parse(e))}catch(a){console.error("LolaBot: Invalid JSON in data-context attribute",a)}p({botId:y,apiBase:s.getAttribute("data-api-base")||"",userId:s.getAttribute("data-user-id")||"",chatId:s.getAttribute("data-chat-id")||"",theme:s.getAttribute("data-theme")||"light",context:r,baseUrl:d})}}window.LolaBot={mount:p},document.readyState==="complete"||document.readyState==="interactive"?x():document.addEventListener("DOMContentLoaded",x)})();})();
