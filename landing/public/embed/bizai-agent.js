"use strict";(()=>{(function(){function x(n){var i=n.botId||"bizai-agent-demo",s=n.apiBase||"",c=n.userId||"",p=n.chatId||"",m=n.theme||"dark",l=n.context||null,d=document.getElementById("bizai-agent-launcher"),u=document.getElementById("bizai-agent-iframe");d&&d.remove(),u&&u.remove();var t=document.createElement("button");t.id="bizai-agent-launcher",t.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',t.style.position="fixed",t.style.bottom="24px",t.style.right="24px",t.style.border="none",t.style.background="#121212",t.style.color="#fff",t.style.borderRadius="50%",t.style.width="60px",t.style.height="60px",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.cursor="pointer",t.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",t.style.transition="all 0.2s ease",t.style.zIndex=999999,t.style.position="fixed";var a=document.createElement("span");a.textContent="1",a.style.position="absolute",a.style.top="-4px",a.style.right="-4px",a.style.background="#ff3b30",a.style.color="#fff",a.style.fontSize="10px",a.style.fontWeight="600",a.style.width="18px",a.style.height="18px",a.style.borderRadius="50%",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.boxShadow="0 1px 3px rgba(0,0,0,0.3)",a.style.pointerEvents="none",t.appendChild(a),t.onmouseenter=function(){t.style.transform="scale(1.05)"},t.onmouseleave=function(){t.style.transform="scale(1)"};var e=document.createElement("iframe");e.id="bizai-agent-iframe",e.style.position="fixed",e.style.bottom="104px",e.style.right="24px",e.style.width="380px",e.style.height="560px",e.style.border="0",e.style.borderRadius="16px",e.style.boxShadow="0 8px 24px rgba(0,0,0,0.15)",e.style.overflow="hidden",e.style.display="none",e.style.zIndex=999999,e.style.transition="all 0.3s ease",e.style.maxWidth="calc(100vw - 40px)",e.style.maxHeight="calc(100vh - 120px)",e.allow="clipboard-read; clipboard-write; microphone";var g=n.baseUrl||"",v="?embed=true"+(s?"&apiBase="+encodeURIComponent(s):"")+(c?"&userId="+encodeURIComponent(c):"")+(p?"&chatId="+encodeURIComponent(p):"")+(m?"&theme="+encodeURIComponent(m):"")+(l?"&context="+encodeURIComponent(JSON.stringify(l)):"");e.src=(g||"")+"/"+encodeURIComponent(i)+v;var h=!1;window.addEventListener("message",function(o){o.data&&o.data.type==="BIZAI_RESIZE"&&(h=o.data.isMaximized,o.data.isMaximized?(e.style.width="100%",e.style.height="100%",e.style.maxWidth="1440px",e.style.top="0",e.style.left="50%",e.style.transform="translateX(-50%)",e.style.right="auto",e.style.bottom="0",e.style.borderRadius="0",e.style.maxHeight="none"):o.data.isCollapsed?(e.style.width="380px",e.style.height="80px",e.style.bottom="104px",e.style.right="24px",e.style.borderRadius="16px",e.style.top="auto",e.style.left="auto",e.style.transform="none",e.style.maxWidth="calc(100vw - 40px)"):(e.style.width="380px",e.style.height="560px",e.style.bottom="104px",e.style.right="24px",e.style.borderRadius="16px",e.style.top="auto",e.style.left="auto",e.style.transform="none",e.style.maxWidth="calc(100vw - 40px)",e.style.maxHeight="calc(100vh - 120px)"))}),t.addEventListener("click",function(){if(a&&a.style.display!=="none"&&(a.style.display="none"),e.style.display==="none"){e.style.display="block",e.style.opacity="0";var o=h?"translateX(-50%) translateY(20px)":"translateY(20px)",I=h?"translateX(-50%) translateY(0)":"translateY(0)";e.style.transform=o,setTimeout(function(){e.style.opacity="1",e.style.transform=I},10)}else e.style.display="none"}),document.body.appendChild(t),document.body.appendChild(e)}function f(){var n=document.currentScript;if(!n){for(var i=document.getElementsByTagName("script"),s=0;s<i.length;s++)if(i[s].src&&i[s].src.includes("/embed/bizai-agent.js")){n=i[s];break}}if(n){var c=new URL(n.src),p=c.origin,m=n.getAttribute("data-bot-id")||"bizai-agent-demo",l=null;if(window.BIZAI_AGENT_CONTEXT&&typeof window.BIZAI_AGENT_CONTEXT=="object"&&(l=window.BIZAI_AGENT_CONTEXT),!l)try{var d=n.getAttribute("data-context");d&&(l=JSON.parse(d))}catch(u){console.error("BizAI Agent: Invalid JSON in data-context attribute",u)}x({botId:m,apiBase:n.getAttribute("data-api-base")||"",userId:n.getAttribute("data-user-id")||"",chatId:n.getAttribute("data-chat-id")||"",theme:n.getAttribute("data-theme")||"dark",context:l,baseUrl:p})}}window.BizAIAgent={mount:x},window.LolaBot={mount:x};for(var y=document.getElementsByTagName("script"),b=!0,r=0;r<y.length;r++)if(y[r].src&&y[r].src.includes("/embed/bizai-agent.js")){y[r].getAttribute("data-no-auto-init")==="true"&&(b=!1);break}b&&(document.readyState==="complete"||document.readyState==="interactive"?f():document.addEventListener("DOMContentLoaded",f))})();})();
