"use strict";(()=>{(function(){function c(a){var o=a.botId||"lola-demo",l=a.apiBase||"",r=a.userId||"",i=a.chatId||"",d=a.theme||"light",n=a.context||null,e=document.createElement("button");e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',e.style.position="fixed",e.style.bottom="20px",e.style.right="20px",e.style.border="none",e.style.background="#121212",e.style.color="#fff",e.style.borderRadius="50%",e.style.width="60px",e.style.height="60px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.cursor="pointer",e.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",e.style.transition="all 0.2s ease",e.style.zIndex=999999,e.onmouseenter=function(){e.style.transform="scale(1.05)"},e.onmouseleave=function(){e.style.transform="scale(1)"};var t=document.createElement("iframe");t.style.position="fixed",t.style.bottom="100px",t.style.right="20px",t.style.width="380px",t.style.height="560px",t.style.border="0",t.style.borderRadius="16px",t.style.boxShadow="0 8px 24px rgba(0,0,0,0.15)",t.style.overflow="hidden",t.style.display="none",t.style.zIndex=999999,t.style.transition="all 0.3s ease",t.style.maxWidth="calc(100vw - 40px)",t.style.maxHeight="calc(100vh - 120px)",t.allow="clipboard-read; clipboard-write; microphone";var m=a.baseUrl||"",h="?apiBase="+encodeURIComponent(l)+(r?"&userId="+encodeURIComponent(r):"")+(i?"&chatId="+encodeURIComponent(i):"")+(d?"&theme="+encodeURIComponent(d):"")+(n?"&context="+encodeURIComponent(JSON.stringify(n)):"");t.src=(m||"")+"/chat/"+encodeURIComponent(o)+h;var y=!1;window.addEventListener("message",function(s){s.data&&s.data.type==="LOLA_RESIZE"&&(y=s.data.isMaximized,s.data.isMaximized?(t.style.width="100%",t.style.height="100%",t.style.maxWidth="1440px",t.style.top="0",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.right="auto",t.style.bottom="0",t.style.borderRadius="0",t.style.maxHeight="none"):s.data.isCollapsed?(t.style.width="380px",t.style.height="80px",t.style.bottom="100px",t.style.right="20px",t.style.borderRadius="16px",t.style.top="auto",t.style.left="auto",t.style.transform="none",t.style.maxWidth="calc(100vw - 40px)"):(t.style.width="380px",t.style.height="560px",t.style.bottom="100px",t.style.right="20px",t.style.borderRadius="16px",t.style.top="auto",t.style.left="auto",t.style.transform="none",t.style.maxWidth="calc(100vw - 40px)",t.style.maxHeight="calc(100vh - 120px)"))}),e.addEventListener("click",function(){if(t.style.display==="none"){t.style.display="block",t.style.opacity="0";var s=y?"translateX(-50%) translateY(20px)":"translateY(20px)",u=y?"translateX(-50%) translateY(0)":"translateY(0)";t.style.transform=s,setTimeout(function(){t.style.opacity="1",t.style.transform=u},10)}else t.style.display="none"}),document.body.appendChild(e),document.body.appendChild(t)}function p(){var a=document.currentScript;if(!a){for(var o=document.getElementsByTagName("script"),l=0;l<o.length;l++)if(o[l].src&&o[l].src.includes("/embed/lolabot.js")){a=o[l];break}}if(a){var r=new URL(a.src),i=r.origin,d=a.getAttribute("data-bot-id")||"lola-demo",n=null;try{var e=a.getAttribute("data-context");e&&(n=JSON.parse(e))}catch(t){console.error("LolaBot: Invalid JSON in data-context attribute",t)}c({botId:d,apiBase:a.getAttribute("data-api-base")||"",userId:a.getAttribute("data-user-id")||"",chatId:a.getAttribute("data-chat-id")||"",theme:a.getAttribute("data-theme")||"light",context:n,baseUrl:i})}}window.LolaBot={mount:c},document.readyState==="complete"||document.readyState==="interactive"?p():document.addEventListener("DOMContentLoaded",p)})();})();
